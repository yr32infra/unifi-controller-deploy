version: '3.9'
services:
  unifi:
    image: linuxserver/unifi-controller:7.4.162@sha256:e0a1e919c0db5510ab65aadefe7bdf103d4ec088dfa0f88ef17af5430c70324c
    hostname: unifi
    container_name: unifi__unifi
    restart: unless-stopped

    environment:
      PUID: 1000
      PGID: 1000

    ports:
      - '3478:3478/udp'   # STUN
      - '10001:10001/udp' # Device Discovery
      - '1900:1900/udp'   # Make application discoverble on L2 Network
      - '8080:8080'       # Device Communication
      - '8443:8443'       # Web interface
      - '8880:8880'       # Guest hotspot (HTTP)
      - '8843:8843'       # Guest hotspot (HTTPS)

    volumes:
      - type: volume
        source: unifi_data
        target: /config

    networks:
      - default

    deploy:
      resources:
        limits:
          memory: 2048m


volumes:
  unifi_data:
    name: unifi__unifi_data

networks:
  default:
    name: unifi__default
